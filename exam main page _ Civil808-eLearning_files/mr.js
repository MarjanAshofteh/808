function addEvent(n,e,i,t){n.addEventListener?n.addEventListener(e,i,t):n.attachEvent?n.attachEvent("on"+e,i):n[e]=i}function gc(n){for(var e=n+"=",i=d.cookie.split(";"),t=0;t<i.length;t++){var c=i[t].trim();if(0==c.indexOf(e))return c.substring(e.length,c.length)}return""}function sc(n,e){var i=new Date;i.setTime(i.getTime()+31536e6);var t="expires="+i.toGMTString();d.cookie=n+"="+e+"; "+t+"; path=/"}function onchange(n){var e={focus:_v,focusin:_v,pageshow:_v,blur:_h,focusout:_h,pagehide:_h};if(n=n||w.event,vv=n.type in e?e[n.type]:this[h]?_h:_v,vv!=_v||_int){if(vv==_h&&(clearInterval(_int),_int=!1,sc(_d,dur),1==_mr.clk)){var i=href+"::"+ref+"::";for(var t in clk)i+=clk[t]+":"+t+"-";sc("_mrclk",i)}}else _int=setInterval(function(){dur++},1e3)}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var d=document,w=window,s=screen,e=encodeURIComponent,m="",_m="__mrud",_d="__dur",_int="",hos="moror.ir",g="http://"+hos+"/"+_m+".gif",dur=0,_v="visible",_h="hidden",ref=d.referrer,href=d.location.href,h=_h,clk={},gid=function(){function n(){return(4096*Math.random()|0)+""}return(new Date).getTime()%1e9+n()+n()};w.onbeforeunload=function(){onchange({type:"blur"})},h in d?addEvent(d,"visibilitychange",onchange):(h="mozHidden")in d?addEvent(d,"mozvisibilitychange",onchange):(h="webkitHidden")in d?addEvent(d,"webkitvisibilitychange",onchange):(h="msHidden")in d?addEvent(d,"msvisibilitychange",onchange):"onfocusin"in d?d.onfocusin=d.onfocusout=onchange:w.onpageshow=w.onpagehide=w.onfocus=w.onblur=onchange,gc(_m)||(sc(_m,gid()),sc(_d,0)),0===ref.indexOf(d.location.origin)&&(ref=ref.replace(d.location.origin,"")),m="?SID="+_mr.sid+"&SCREEN="+(s.width+"x"+s.height)+"&URL="+e(d.location.href)+"&REF="+e(ref)+"&TITLE="+e(d.title)+"&__mrud="+gc(_m)+"&DUR="+gc(_d),(cc=gc("_mrclk"))&&(m+="&clk="+cc,sc("_mrclk",0)),onchange({type:"focus"});var img=new Image,last=0;img.onload=function(){if(_mr.clk){var n=function(n){if(0/0!=w.scrollX&&0/0!=n.clientX){var e=10*Math.round((w.scrollX+n.clientX)/10-.01)+5+":"+(10*Math.round((w.scrollY+n.clientY)/10-.01)+5)+":"+w.innerWidth;last=clk[e]=clk[e]?clk[e]+1:1;var i=href+"::"+ref+"::1:"+e;img.src=g+"?SID="+_mr.sid+"&conly=1&clk="+i}};addEvent(w,"click",n,!0),img.onload=function(){clk[last]&&clk[last]>1?clk[last]--:delete clk[last]}}},img.src=g+m;